[gd_resource type="Resource" load_steps=2 format=3 uid="uid://bm5gr6g018aum"]

[sub_resource type="GDScript" id="GDScript_nhm6f"]
script/source = "extends Resource
'''
Actions directly modify the npc to set in motion events based on a series of considerations. 
These are the \"leaf nodes\" of the behaviour tree. 

find_target:
	Selects the best target from the list of npc's currently colliding with the NPC's vision radius. 
	Once best target is found, sets the target and initiates combat. 
'''

# List of considerations for choosing this specific reasoner
var considerations = [\"Enemy Strength\", \"Distance\", \"Nearby Allies\", \"Nearby Enemies\"]
var name = \"Retreat\"

func consider(npc: NPC, kingdom_state):
	var consideration_value = 0
	for consideration in considerations:
		var consider_node = kingdom_state.consider_list[consideration] 
		consideration_value += consider_node.calculate_consideration_value(npc, kingdom_state)
	return consideration_value/considerations.size() 
	
func take_action(npc: NPC, best_target: NPC):
	npc.set_destination(Vector3(0,0,0))
	return
"

[resource]
script = SubResource("GDScript_nhm6f")
